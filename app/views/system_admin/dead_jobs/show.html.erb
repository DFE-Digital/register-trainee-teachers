
<%= content_for(:breadcrumbs) do %>
  <%= render GovukComponent::BackLinkComponent.new(text: t(:back), href: dead_jobs_path) %>
<% end %>

<div class="govuk-grid-row">
  <div class ="govuk-grid-column-two-thirds-from-desktop">
    <%= render PageTitle::View.new(i18n_key: "dead_jobs.show") %>
  </div>
</div>

<% if dead_job_service.count.zero? %>

  <p class="govuk-body">
    There are no dead jobs
  </p>

<% else %>

  <table class="govuk-table">
    <caption class="govuk-table__caption govuk-table__caption--m"><%= dead_job_service.name %></caption>
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <% dead_job_service.headers&.each do |header| %>
          <th scope="col" class="govuk-table__header"><%= header.to_s.humanize %></th>
        <% end %>
      </tr>
    </thead>

    <tbody class="govuk-table__body">
      <% dead_job_service.rows&.each do |row| %>
        <tr class="govuk-table__row">
          <% row.each do |data| %>
            <td class="govuk-table__cell"><%= data[-1] %></td>
          <% end %>
          <td class="govuk-table__cell">
            <%= render GovukButtonLinkTo::View.new(
              body: "View",
              id: "view_#{row[:register_id]}",
              url: trainee_path(Trainee.find(row[:register_id]),
                                class_option: "govuk-!-margin-bottom-0"
              )) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
