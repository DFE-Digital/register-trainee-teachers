<%= render PageTitle::View.new(text: "Register API HESA #{controller_name.capitalize} reference") %>

<%= tag.h1("Register API HESA #{controller_name.capitalize.singularize} reference", class: "govuk-heading-l") %>

<%= render TabNavigation::View.new(
  items: Settings.api.allowed_versions.map do |version|
    {
      url: public_send("api_docs_hesa_reference_#{controller_name.singularize}_attribute_path", version),
      name: version,
      current: version == api_version,
    }
  end
) %>

<%= content_for(:breadcrumbs) do %>
  <%= render GovukComponent::BackLinkComponent.new(
    text: "Back",
    href: api_docs_versioned_hesa_reference_path(version),
  ) %>
<% end %>

<%= govuk_table do |table|
  table.with_caption(size: "m", text: @attribute.to_s.humanize)

  table.with_body do |body|
    body.with_row do |row|
      row.with_cell(header: true, text: 'Valid entries and labels ')
      row.with_cell do
        govuk_table do |inner_table|
          inner_table.with_head do |inner_head|
            inner_head.with_row do |inner_head_row|
              inner_head_row.with_cell(text: "Code")
              inner_head_row.with_cell(text: "Label")
            end
          end

          inner_table.with_body do |inner_body|
            @mapper.each do |key, value|
              inner_body.with_row do |inner_body_row|
                inner_body_row.with_cell(text: key)
                inner_body_row.with_cell(text: value)
              end
            end
          end
        end
      end
    end
  end
end %>


